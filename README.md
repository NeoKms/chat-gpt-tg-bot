## Приложение для запуска чат-бота для Telegram на основе ChatGPT 

Может работать в двух режимах
1. От лица пользователя
2. От лица бота

## Запуск
### 1. Бот
1. Получить токен бота
2. Получить [OpenAI API key](https://platform.openai.com/account/api-keys)
3. Добавить их в env ```docker-compose.yaml```
4. Выполнить ```docker-compose up -d```

### 2. Пользователь
1. Получить [API_HASH и API_ID](https://my.telegram.org/)
2. Получить [OpenAI API key](https://platform.openai.com/account/api-keys)
3. Добавить их и номер телефона в env ```docker-compose.yaml```
4. Выполнить ```docker-compose up -d```
5. Выполнить ```docker exec -it openaibot sh -c "cd /var/www/app && node tglogin.js"``` и ввести код авторизации
6. Выполнить ```docker exec -it openaibot sh -c "pm2 restart all"```

## Возможности 
Для получения помощи отправить ```/help```

Для установки поведения отправить ```/system поведение``` или во время отправки сообщения ```поведение/system/текст сообщения``` (в данном случае история сообщений не сохраняется, чтобы не портить заданный контекст). Например, можно установить, чтобы он переводил текст: ```/system Ты помощник в переводе текста с русского на японский```

Для включения режима запоминания истории (режим "чата") ```/history```. В данном режиме бот будет запоминать все сообщения и отвечать учитывая предыдущие сообщения. Вызов команды отчищает сохраненную в базе историю сообщений.

Для принудительной отчистки истории ```/clear_history```

## Дополнительные переменные окружения
1. TIMEOUT_MSG_EDIT - Время между обновлением (изменением сообщения) ответа в реальном времени. Маленькие значения могут приводить ко временной блокировки по флуду.
